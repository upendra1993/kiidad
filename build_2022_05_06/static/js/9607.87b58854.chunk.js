"use strict";(self.webpackChunkkiidad=self.webpackChunkkiidad||[]).push([[9607],{3160:function(e,t,n){var r=n(4569),a=n.n(r)().create({baseURL:"http://dev.kiidad.com/api/"});a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.Authorization=t?"Bearer ".concat(t):"",e})),t.Z=a},9607:function(e,t,n){n.r(t);var r=n(5861),a=n(5671),c=n(3144),o=n(136),s=n(5716),i=n(7757),l=n.n(i),u=n(2791),m=n(1523),p=n(6140),d=n(3160),g=(0,u.lazy)((function(){return Promise.all([n.e(7114),n.e(4251)]).then(n.bind(n,4251))})),f=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,a.Z)(this,n);for(var c=arguments.length,o=new Array(c),s=0;s<c;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).onSubmit=function(){var t=(0,r.Z)(l().mark((function t(n){var r,a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.Z.post("login",n);case 3:(r=t.sent).data.success?(a=r.data.token,localStorage.setItem("token",a),p.ZP.success("login successful !"),e.props.history.push("/")):alert("authentication failed try again"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("login request failed with exception",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==localStorage.getItem("token")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,d.Z.get("get_user");case 6:t=e.sent,p.ZP.success("you are already logged in !"),"user"in t.data&&this.props.history.push("/"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("token not valid",e.t0),localStorage.removeItem("token");case 15:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return u.createElement("div",{className:"container my-3"},u.createElement("div",{className:"row border"},u.createElement("div",{className:"col-md-6 bg-light bg-gradient p-3 d-none d-md-block"},u.createElement(m.rU,{to:"/"},u.createElement("img",{src:"../../images/banner/Dell.webp",alt:"...",className:"img-fluid"})),u.createElement(m.rU,{to:"/"},u.createElement("img",{src:"../../images/banner/Laptops.webp",alt:"...",className:"img-fluid"}))),u.createElement("div",{className:"col-md-6 p-3"},u.createElement("h4",{className:"text-center"},"Sign In"),u.createElement(g,{onSubmit:this.onSubmit}))))}}]),n}(u.Component);t.default=f}}]);
//# sourceMappingURL=9607.87b58854.chunk.js.map